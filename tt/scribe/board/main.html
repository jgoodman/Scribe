<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
    [%- INCLUDE scribe/head.html %]
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.4/jquery-ui.min.js"></script>
    <script>
    $(function() {
      $( "#sortable" ).sortable({
          stop: function (event, ui) {
              var data = $(this).sortable('serialize');
              $.ajax({
                  data: data,
                  type: 'POST',
                  url: '[% url %]/note_order_update'
              });
          }
      }
      );
      $( "#sortable" ).disableSelection();
    });
    </script>
    <script>
    $(document).ready(function(){
        $("#hide").click(function(){
            $("#dialog-note-update").hide();
        });
        $("#show").click(function(){
            $("#dialog-note-update").show();
        });
    });
    </script>
    <script>
    $(function() {
        var dialog = $( "#dialog-note-update" ).dialog({
            autoOpen: false,
            height: 300,
            width: 350,
            modal: true,
            close: function() {
                allFields.removeClass( "ui-state-error" );
            }
        });
        $( "#show-dialog-note-update" ).button().on( "click", function() {
            dialog.dialog( "open" );
        });
    });
    </script>
</head>
<body>
<div id="wrapper">
    [%- INCLUDE scribe/header.html %]
    <div id="content">
        <button id="show-dialog-note-update">update note</button>
        <div id="dialog-note-update" title="Update Note" style="background-color:#F2F2F2;border: 2px solid black;">
          <p>TODO! Implement This</p>
        </div>
        <ul id="sortable">
            [%- FOREACH note IN notes %]
            <div class="note" id="note-id_[%- note.note_id %]">
            <li class="ui-state-default">
                <div class="note-header note-header-[%- note.color %]">
                    <span class="note-header-name">[%- note.name %]</span>
                    <form class="note-header-delete" action="[%- url %]/note_delete" name="[% form_name %]" method="post">
                        <input class="note-header-delete" style="display: none;" name="note_id" value="[%- note.note_id %]"></input>
                        <button class="note-header-delete" type="submit">x</button>
                    </form>
                </div>
                <div class="note-content">
                    <span>[%- note.text %]</span>
                </div>
                <div class="note-url">
                [%- IF note.document_id %]
                    <form action="[%- url %]/document" name="[% form_name %]" method="post">
                        <input style="display: none;" name="document_id" value="[%- note.document_id %]"></input>
                        <button type="submit">open [%- note.document_name %]</button>
                    </form>
                [%- END %]
                </div>
            </li>
            </div>
            [%- END %]
        </ul>
    </div>
[%- INCLUDE scribe/footer.html %]
