[%- INCLUDE scribe/wrapper.html %]
    <div id="content">
        <span class="id-header">Scene Id: [% scene.scene_id %]</span>
        <div class="form">
        <form name="[% form_name %]" method="post">
            <input name="scene_id" style="display: none;" value="[%- scene.scene_id %]"></input>
            <input name="submit_update" style="display: none;" value="[%- scene.scene_id %]"></input>
            <table>
                <tr>
                    <td>
                        <input class="name" type="text" name="name" value="[%- scene.name %]">
                    </td>
                    <td>
                        <select class="color" name="label_id">
                            [% FOREACH label IN labels %]
                            <option
                                [% IF label.color %] class="option-color-[% label.color %]" [% END %]
                                [% IF scene.label_id == label.label_id %] selected="selected" [% END %]
                                value="[% label.label_id %]"
                             >
                                [% label.name %]
                            </option>
                            [% END %]
                        </select>
                    </td>
                </tr>
                <tr>
                    <td colspan="2"><textarea class="text" rows="5" cols="41" name="summary">[%- scene.summary %]</textarea></td>
                </tr>
            </table>
            <table>
                <tr>
                    <td>
                        <span>Weight</span>
                    </td>
                    <td>
                        <input class="name" type="number" name="weight" value="[%- scene.weight %]"> 
                    </td>
                </tr>
                <tr>
                    <td>
                        <span>Doc URL</span>
                    </td>
                    <td>
                        <input class="name" type="url" name="document_url_address" value="[%- scene.document_url_address %]"> 
                    </td>
                </tr>
                <tr>
                    <td>
                        <span>Place</span>
                    </td>
                    <td>
                        <select class="color" name="place_id">
                            <option
                                [%- IF ! scene.place_id %]
                                selected="selected"
                                [%- END %]
                            >
                            </option>
                            [%- FOREACH place IN places %]
                            <option
                                [%- IF scene.place_id AND scene.place_id == place.place_id %]
                                selected="selected"
                                [% END %]
                                value="[% place.place_id %]"
                            >
                                [%- place.name %]
                            </option>
                            [%- END %]
                        </select>
                    </td>
                </tr>
                <tr>
                    <td>
                        <span>Characters</span>
                    </td>
                    <td>
                        <table>
                        [% FOREACH character IN characters %]
                        [% character_id = character.character_id %]
                            <tr>
                                <td>
                                    <input
                                        type="checkbox"
                                        name="characters[]"
                                        value="[% character.character_id %]"
                                        [%- IF scene.characters.grep(character_id).size %]
                                        checked
                                        [%- END %]
                                    >
                                    </input>
                                </td>
                                <td>
                                    [% character.name %]
                                </td>
                            </tr>
                        [% END %]
                        </table>
                    </td>
                </tr>
                <tr>
                    <td><input class="submit" type="submit" value="Update"></td>
                    </td><td>
                </tr>
            </table>
        </form>
        </div>
        [% IF scene.tasks.size %]
        <div class="list-child-items">
            <span class="list-child-items">Tasks</span>
            <a href="[%- url_cgi %]/task/add?scene_id=[% scene.scene_id%]"><i class="fi-plus"></i></a>
            <ul class="list-child-items">
                [% FOREACH task IN scene.tasks %]
                <li class="list-child-items">
                    <a
                        href="[%- url_cgi %]/task/edit?task_id=[% task.task_id%]"
                    ><i class="fi-pencil"></i></a>
                    <a
                        href="[%- url_cgi %]/task/delete?task_id=[% task.task_id%]"
                        onclick="return confirm('This is a permanent deletion and cannot be undone. Are you sure you want to continue?')"
                    ><i class="fi-x"></i></a>
                    [% task.character_name  %] [% task.summary  %]
                </li>
                [% END %]
            </ul>
        </div>
        [% END %]
    </div>        
[% INCLUDE scribe/footer.html %]
